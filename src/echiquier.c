#include "../include/echiquier.h"


/*******************************************************************************\
 ===============================================================================
 
            Définition des variables de représentation de l'échiquier 
 
 ===============================================================================
\*******************************************************************************/


BB echiquier[12] = {0ULL};

BB occupations[3] = {0ULL};

// 0 = blancs
// 1 = noirs
// 2 = mixte
int trait = 0;

// état actuel des droits de roque
int roque = petit_roque_blanc | grand_roque_blanc | petit_roque_noir | grand_roque_noir;

// identifiant de la case prenable "en passant"
int enpassant = no_sq;


/*******************************************************************************\
 ===============================================================================
 
            Variables d'indiçage et d'affichage des cases
 
 ===============================================================================
\*******************************************************************************/


// squares string values
char *square_to_coordonnees[64] = {
    "a8", "b8", "c8", "d8", "e8", "f8", "g8", "h8",
    "a7", "b7", "c7", "d7", "e7", "f7", "g7", "h7",
    "a6", "b6", "c6", "d6", "e6", "f6", "g6", "h6",
    "a5", "b5", "c5", "d5", "e5", "f5", "g5", "h5",
    "a4", "b4", "c4", "d4", "e4", "f4", "g4", "h4",
    "a3", "b3", "c3", "d3", "e3", "f3", "g3", "h3",
    "a2", "b2", "c2", "d2", "e2", "f2", "g2", "h2",
    "a1", "b1", "c1", "d1", "e1", "f1", "g1", "h1"
};


/*******************************************************************************\
 ===============================================================================
 
            Variables d'indiçage et d'affichage des pièces
 
 ===============================================================================
\*******************************************************************************/


char *pieces_unicode[12] = {"♟︎", "♞", "♝", "♜", "♛", "♚", "♙", "♘", "♗", "♖", "♕", "♔"};

int char_piece[] = {
    ['P'] = P,
    ['N'] = N,
    ['B'] = B,
    ['R'] = R,
    ['Q'] = Q,
    ['K'] = K,
    ['p'] = p,
    ['n'] = n,
    ['b'] = b,
    ['r'] = r,
    ['q'] = q,
    ['k'] = k
};

// pour communication avec l'interface UCI
int piece_char[] = {
    [P] = ' ',
    [N] = 'n',
    [B] = 'b',
    [R] = 'r',
    [Q] = 'q',
    [K] = 'k',
    [p] = ' ',
    [n] = 'n',
    [b] = 'b',
    [r] = 'r',
    [q] = 'q',
    [k] = 'k'
};


/*******************************************************************************\
 ===============================================================================
 
            Fonctions utilitaires, affichage de l'échiquier
 
 ===============================================================================
\*******************************************************************************/


int presence_sq(int square) {
    // à implémenter
    return 0;
}
                

void print_echiquier() {
    // à implémenter
}


/*******************************************************************************\
 ===============================================================================
 
            Parsing d'une position de l'échiquier en notation FEN
 
 ===============================================================================
\*******************************************************************************/



void parse_fen(char *fen) {
    // à implémenter
}